{% extends "layout.html" %}

{% block title %}
Drivers
{% endblock %}

{% block nav %}
<li class="nav-item">
    <a class="nav-link" aria-current="page" href="/">Home</a>
</li>
<li class="nav-item">
    <a class="nav-link active" href="/drivers">Drivers</a>
</li>
<li class="nav-item">
    <a href="/constructors" class="nav-link">Constructors</a>
</li>
<li class="nav-item">
    <a href="/races" class="nav-link">Races</a>
</li>
{% endblock %}

{% block main %}
<h1 class="m-4">{{ year }} Formula 1 Driver Standings</h1>
<div class="card p-3 m-3">
    <div class="container-fluid pt-3 pb-3">
        <div class="row">
            <form method="POST" action="/drivers" class="d-flex">
                <div class="col-auto me-2">
                    <select class="form-select" name="year" id="year">
                        {% for year in range(2024, 1957, -1) %}
                        <option value="{{ year }}" {% if year==selected_year %}selected{% endif %}>{{ year }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-auto align-self-end">
                    <button type="submit" class="btn btn-danger">Filter</button>
                </div>
            </form>
        </div>
    </div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Position</th>
                <th>Driver</th>
                <th>Nationality</th>
                <th>Team</th>
                <th>Points</th>
            </tr>
        </thead>
        {% for driver_standing in driver_standings %}
        <tr>
            <td>{{ driver_standing.position }}</td>
            <td>{{ driver_standing.driver.given_name }} {{driver_standing.driver.family_name}} </td>
            <td>{{ driver_standing.driver.nationality }}</td>
            <td>{{ driver_standing.constructors[0].name }}</td>
            <td>{{ driver_standing.points }}</td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}